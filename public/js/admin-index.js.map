{"version":3,"sources":["admin-index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin-index.js","sourcesContent":["$(document).ready(function() {\n\tChart.defaults.global.responsive = true;\n\tvar primary_color = \"#A132B7\";\n\tvar secondary_color = \"#F191B3\";\n\t\n\t$.ajax({\n\t\turl: 'admin/statistic-graph',\n        method: 'POST',\n        dataType: 'json',\n        success: loadGraphPostSuccess,\n        error: function(xhr, status, error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t});\n\t\n\tfunction loadGraphPostSuccess(data, status, xhr) {\n\t\tvar blogposts_month = data.blogposts_month;\n\t\tvar imageposts_month = data.imageposts_month;\n\t\tvar subscriptions_month = data.subscriptions_month;\n\t\tconsole.log(blogposts_month);\n\t\tconsole.log(imageposts_month);\n\t\tconsole.log(subscriptions_month);\n\t\t\n\t\tvar labels = [];\n\t\tvar plot_data_bp = [];\n\t\tvar plot_data_ip = [];\n\t\tvar plot_data_subsc = [];\n\t\tvar max_y_post = 8;\n\t\tvar max_y_subsc = 20;\n\t\t\n\t\t// Blog posts array\n\t\tfor (var i = 0; i < blogposts_month.length; i++) {\n\t\t\tbp_m = blogposts_month[i];\n\t\t\tlabels.push(moment('1-' + bp_m.month + '-' + bp_m.year, 'DD-M-YYYY').format('MMM'));\n\t\t\tplot_data_bp.push(bp_m.count);\n\t\t\tif (bp_m.count > max_y_post) {\n\t\t\t\tmax_y_post = 4 * Math.ceil(bp_m.count/4);\n\t\t\t} \n\t\t}\n\t\t\n\t\t// Image posts array\n\t\tfor (var j = 0; j < imageposts_month.length; j++) {\n\t\t\tip_m = imageposts_month[j];\n\t\t\tplot_data_ip.push(ip_m.count);\n\t\t\tif (ip_m.count > max_y_post) {\n\t\t\t\tmax_y_post = 4 * Math.ceil(ip_m.count/4);\n\t\t\t} \n\t\t}\n\t\t\n\t\t// Subscriptions array\n\t\tfor (var j = 0; j < subscriptions_month.length; j++) {\n\t\t\tsubsc_m = subscriptions_month[j];\n\t\t\tplot_data_subsc.push(subsc_m.count);\n\t\t\tif (subsc_m.count > max_y_subsc) {\n\t\t\t\tmax_y_subsc = 4 * Math.ceil(subsc_m.count/4);\n\t\t\t} \n\t\t}\n\t\t\n\t\t//console.log(labels);\n\t\t//console.log(plot_data_bp);\n\t\t\n\t\t// Post graph\n\t\tpost_graph_data = {\n\t\t\tlabels: labels,\n\t\t    datasets: [\n\t\t        {\n\t\t        \tlabel: \"Blog posts\",\n\t\t            fillColor: \"rgba(161,50,183,0.5)\",\n\t\t            strokeColor: \"rgba(161,50,183,0.75)\",\n\t\t            highlightFill: \"rgba(161,50,183,0.75)\",\n\t\t            highlightStroke: \"rgba(161,50,183,1)\",\n\t\t            data: plot_data_bp\n\t\t        }, \n\t\t        {\n\t\t        \tlabel: \"Image posts\",\n\t\t            fillColor: \"rgba(241,145,179,0.5)\",\n\t\t            strokeColor: \"rgba(241,145,179,0.75)\",\n\t\t            highlightFill: \"rgba(241,145,179,0.75)\",\n\t\t            highlightStroke: \"rgba(241,145,179,1)\",\n\t\t            data: plot_data_ip\n\t\t        }\n\t\t    ]\n\t\t};\n\t\t\n\t\tvar post_graph_options = {\n\t\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\n\t\t\tscaleOverride: true,\n\t\t\tscaleSteps: 4,\n\t\t\tscaleStepWidth: max_y_post/4,\n    \t\tscaleStartValue: 0,\n    \t\ttooltipCornerRadius: 0,\n    \t\tmultiTooltipTemplate: \"<%= datasetLabel %> : <%= value %>\"\n\t\t};\n\t\t\n\t\tvar canvas_ctx = $(\"#graph-post\").get(0).getContext(\"2d\");\n\t\t\n\t\tvar postGraph = new Chart(canvas_ctx).Bar(post_graph_data, post_graph_options);\n\t\t\n\t\t// Subsciptions graph data\n\t\tsubsc_graph_data = {\n\t\t\tlabels: labels,\n\t\t\tdatasets: [\n\t\t        {\n\t\t        \tlabel: \"Blog posts\",\n\t\t            fillColor: \"rgba(220,220,220,0)\",\n\t\t            strokeColor: primary_color,\n\t\t            pointColor: primary_color,\n\t\t            pointStrokeColor: primary_color,\n\t\t            pointHighlightFill: \"#AAA\",\n\t\t            pointHighlightStroke: \"#AAA\",\n\t\t            data: plot_data_subsc\n\t\t        }\n\t        ]\n\t\t};\n\t\t\n\t\tvar subsc_graph_options = {\n\t\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\n\t\t\tscaleOverride: true,\n\t\t\tscaleSteps: 4,\n\t\t\tscaleStepWidth: max_y_subsc/4,\n    \t\tscaleStartValue: 0,\n    \t\tpointDotRadius: 4,\n    \t\tpointDotStrokeWidth: 2,\n    \t\ttooltipCornerRadius: 0\n\t\t};\n\t\t\n\t\tvar canvas_ctx = $(\"#graph-subsc\").get(0).getContext(\"2d\");\n\t\t\n\t\tvar subscGraph = new Chart(canvas_ctx).Line(subsc_graph_data, subsc_graph_options);\n\t}\n});\n\n"],"sourceRoot":"/source/"}