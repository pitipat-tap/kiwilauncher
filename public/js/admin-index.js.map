{"version":3,"sources":["admin-index.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"admin-index.js","sourcesContent":["$(document).ready(function() {\r\n\tChart.defaults.global.responsive = true;\r\n\tvar primary_color = \"#A132B7\";\r\n\tvar secondary_color = \"#F191B3\";\r\n\t\r\n\t$.ajax({\r\n\t\turl: 'admin/statistic-graph',\r\n        method: 'POST',\r\n        dataType: 'json',\r\n        success: loadGraphPostSuccess,\r\n        error: function(xhr, status, error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t});\r\n\t\r\n\tfunction loadGraphPostSuccess(data, status, xhr) {\r\n\t\tvar blogposts_month = data.blogposts_month;\r\n\t\tvar imageposts_month = data.imageposts_month;\r\n\t\tvar subscriptions_month = data.subscriptions_month;\r\n\t\tconsole.log(blogposts_month);\r\n\t\tconsole.log(imageposts_month);\r\n\t\tconsole.log(subscriptions_month);\r\n\t\t\r\n\t\tvar labels = [];\r\n\t\tvar plot_data_bp = [];\r\n\t\tvar plot_data_ip = [];\r\n\t\tvar plot_data_subsc = [];\r\n\t\tvar max_y_post = 8;\r\n\t\tvar max_y_subsc = 20;\r\n\t\t\r\n\t\t// Blog posts array\r\n\t\tfor (var i = 0; i < blogposts_month.length; i++) {\r\n\t\t\tbp_m = blogposts_month[i];\r\n\t\t\tlabels.push(moment('1-' + bp_m.month + '-' + bp_m.year, 'DD-M-YYYY').format('MMM'));\r\n\t\t\tplot_data_bp.push(bp_m.count);\r\n\t\t\tif (bp_m.count > max_y_post) {\r\n\t\t\t\tmax_y_post = 4 * Math.ceil(bp_m.count/4);\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\t// Image posts array\r\n\t\tfor (var j = 0; j < imageposts_month.length; j++) {\r\n\t\t\tip_m = imageposts_month[j];\r\n\t\t\tplot_data_ip.push(ip_m.count);\r\n\t\t\tif (ip_m.count > max_y_post) {\r\n\t\t\t\tmax_y_post = 4 * Math.ceil(ip_m.count/4);\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\t// Subscriptions array\r\n\t\tfor (var j = 0; j < subscriptions_month.length; j++) {\r\n\t\t\tsubsc_m = subscriptions_month[j];\r\n\t\t\tplot_data_subsc.push(subsc_m.count);\r\n\t\t\tif (subsc_m.count > max_y_subsc) {\r\n\t\t\t\tmax_y_subsc = 4 * Math.ceil(subsc_m.count/4);\r\n\t\t\t} \r\n\t\t}\r\n\t\t\r\n\t\t//console.log(labels);\r\n\t\t//console.log(plot_data_bp);\r\n\t\t\r\n\t\t// Post graph\r\n\t\tpost_graph_data = {\r\n\t\t\tlabels: labels,\r\n\t\t    datasets: [\r\n\t\t        {\r\n\t\t        \tlabel: \"Blog posts\",\r\n\t\t            fillColor: \"rgba(161,50,183,0.5)\",\r\n\t\t            strokeColor: \"rgba(161,50,183,0.75)\",\r\n\t\t            highlightFill: \"rgba(161,50,183,0.75)\",\r\n\t\t            highlightStroke: \"rgba(161,50,183,1)\",\r\n\t\t            data: plot_data_bp\r\n\t\t        }, \r\n\t\t        {\r\n\t\t        \tlabel: \"Image posts\",\r\n\t\t            fillColor: \"rgba(241,145,179,0.5)\",\r\n\t\t            strokeColor: \"rgba(241,145,179,0.75)\",\r\n\t\t            highlightFill: \"rgba(241,145,179,0.75)\",\r\n\t\t            highlightStroke: \"rgba(241,145,179,1)\",\r\n\t\t            data: plot_data_ip\r\n\t\t        }\r\n\t\t    ]\r\n\t\t};\r\n\t\t\r\n\t\tvar post_graph_options = {\r\n\t\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\r\n\t\t\tscaleOverride: true,\r\n\t\t\tscaleSteps: 4,\r\n\t\t\tscaleStepWidth: max_y_post/4,\r\n    \t\tscaleStartValue: 0,\r\n    \t\ttooltipCornerRadius: 0,\r\n    \t\tmultiTooltipTemplate: \"<%= datasetLabel %> : <%= value %>\"\r\n\t\t};\r\n\t\t\r\n\t\tvar canvas_ctx = $(\"#graph-post\").get(0).getContext(\"2d\");\r\n\t\t\r\n\t\tvar postGraph = new Chart(canvas_ctx).Bar(post_graph_data, post_graph_options);\r\n\t\t\r\n\t\t// Subsciptions graph data\r\n\t\tsubsc_graph_data = {\r\n\t\t\tlabels: labels,\r\n\t\t\tdatasets: [\r\n\t\t        {\r\n\t\t        \tlabel: \"Blog posts\",\r\n\t\t            fillColor: \"rgba(220,220,220,0)\",\r\n\t\t            strokeColor: primary_color,\r\n\t\t            pointColor: primary_color,\r\n\t\t            pointStrokeColor: primary_color,\r\n\t\t            pointHighlightFill: \"#AAA\",\r\n\t\t            pointHighlightStroke: \"#AAA\",\r\n\t\t            data: plot_data_subsc\r\n\t\t        }\r\n\t        ]\r\n\t\t};\r\n\t\t\r\n\t\tvar subsc_graph_options = {\r\n\t\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\r\n\t\t\tscaleOverride: true,\r\n\t\t\tscaleSteps: 4,\r\n\t\t\tscaleStepWidth: max_y_subsc/4,\r\n    \t\tscaleStartValue: 0,\r\n    \t\tpointDotRadius: 4,\r\n    \t\tpointDotStrokeWidth: 2,\r\n    \t\ttooltipCornerRadius: 0\r\n\t\t};\r\n\t\t\r\n\t\tvar canvas_ctx = $(\"#graph-subsc\").get(0).getContext(\"2d\");\r\n\t\t\r\n\t\tvar subscGraph = new Chart(canvas_ctx).Line(subsc_graph_data, subsc_graph_options);\r\n\t}\r\n});\r\n\r\n"],"sourceRoot":"/source/"}